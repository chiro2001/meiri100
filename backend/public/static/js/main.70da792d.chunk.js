(this["webpackJsonpgbk-frontend"]=this["webpackJsonpgbk-frontend"]||[]).push([[0],{139:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){"use strict";n.r(t);var a=n(8),c=n.n(a),r=n(15),s=n(0),i=n.n(s),o=n(14),l=n.n(o),u=(n(139),n(13)),d=n(67),j=n(26),h=(n(140),n(4)),b=n(228),f=n(22),O=n(233),x=n(239),p=n(231),g=n(232),v=n(211),m=n(230),y=n(62),k=n(227),S=n(214),w=n(109),_=n.n(w),C=n(111),E=n.n(C),T=n(110),q=n.n(T),A=n(112),D=n.n(A),N=n(114),W=n.n(N),R=n(115),I=n.n(R),F=n(113),L=n.n(F),P=n(71),G=n(17),J=n(86),z=n(229),B=n(103),U=n(39),M=n.n(U),K=(n(98),n(61)),H=n(104),X=n(30),Y=n(31),Q=n(116),V=n(200),Z=n(81),$=n(201),ee=n(80);function te(e){return M()(e).format("LLLL")}function ne(e){return new Promise((function(t){setTimeout(t,e)}))}function ae(e){return null!=e&&"function"===typeof e[Symbol.iterator]}function ce(e){if(null===e||void 0===e)return e;if(ae(e)&&"string"!==typeof e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}if("object"===typeof e){var a={};for(var c in e)a[c]=ce(e[c]);return a}return e}function re(e,t){if(!e&&!t)return null;var n=ce(e);for(var a in n||(n={}),t)n[a]=t[a];return n}Date.prototype.setDay=function(e){var t=this.getDay();return t===e||this.setTime(this.getTime()+864e5*(e-t)),this},Date.prototype.toDateString=function(){return this.toISOString().slice(0,10)};function se(e){return function(t){t({type:"SET_CONFIG",data:e})}}function ie(e){return function(t){t({type:"SET_USER",data:e})}}function oe(e){return function(t){t({type:"SET_DAEMON",data:e})}}function le(e){return function(t){t({type:"SET_ERROR_INFO",data:e})}}function ue(e){return function(t){t({type:"SET_MESSAGE",data:e})}}var de=new(function(){function e(){Object(X.a)(this,e),this.host=window.location.href.includes("localhost")?"localhost":null,this.port=8088,this.api_version="v1",this.api_prefix="/api/".concat(this.api_version),this.protocol="http",this.url=this.host?"".concat(this.protocol,"://").concat(this.host,":").concat(this.port).concat(this.api_prefix):"".concat(this.api_prefix),this.access_token="",this.refresh_token=""}return Object(Y.a)(e,[{key:"set_token",value:function(e,t){void 0!==e&&(this.access_token=e),void 0!==t&&(this.refresh_token=t)}},{key:"get_token",value:function(){return{access_token:""===this.access_token?void 0:this.access_token,refresh_token:""===this.refresh_token?void 0:this.refresh_token}}},{key:"request_key",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a=arguments.length>3?arguments[3]:void 0;return this.request("".concat(e,"/").concat(t),n,a)}},{key:"update_config",value:function(){var e=Oe.getState().config;e.data.api_token=this.get_token(),console.log("config.data.api_token",e.data.api_token),Oe.dispatch(se(e))}},{key:"load_from_config",value:function(){var e=Oe.getState().config;this.set_token(e.data.api_token.access_token,e.data.api_token.refresh_token)}},{key:"get_headers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={"Content-Type":"application/json"};return e&&(n.Refresh=this.refresh_token),t&&""!==this.access_token&&(n.Authorization=this.access_token),n}},{key:"request",value:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,a,r,s,i,o,l,u,d,j,h,b,f=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:"GET",a=f.length>2?f[2]:void 0,r={method:n,mode:"cors",body:a?JSON.stringify(a):void 0,headers:this.get_headers(Boolean("session"===t&&"DELETE"===n))},s=null,e.prev=4,e.next=7,fetch("".concat(this.url,"/").concat(t),r);case 7:s=e.sent,e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(4),console.error(e.t0),Oe.dispatch(le(e.t0)),s={status:433,error:"Error when fetching internet"},e.abrupt("return",{code:s.status,error:s.statusText});case 16:return i=null,e.prev=17,e.next=20,s.json();case 20:i=e.sent,e.next=28;break;case 23:return e.prev=23,e.t1=e.catch(17),console.error(e.t1),Oe.dispatch(le(e.t1)),e.abrupt("return",{code:s.status,error:s.statusText});case 28:if(console.log("raw js:",i),i||((i={}).message=s.statusText),void 0===i.code&&(i.code=s.status),422!==i.code){e.next=58;break}if(""!==this.refresh_token){e.next=34;break}return e.abrupt("return",null);case 34:return e.next=36,fetch("".concat(this.url,"/session"),{method:"GET",mode:"cors",headers:this.get_headers(!0)});case 36:return o=e.sent,e.prev=37,e.next=40,o.json();case 40:if(200!==(l=e.sent).code){e.next=48;break}this.set_token(l.data.access_token,l.data.refresh_token),this.update_config(),200===(u=this.request("user","GET")).code&&Oe.dispatch(ie(u.data.user)),e.next=50;break;case 48:return Oe.dispatch(le("\u767b\u5f55\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55")),e.abrupt("return",null);case 50:e.next=55;break;case 52:return e.prev=52,e.t2=e.catch(37),e.abrupt("return",{code:o.status,error:o.statusText});case 55:return e.abrupt("return",this.request(t,n,a));case 58:if(424!==i.code){e.next=69;break}return Oe.dispatch(oe(null)),e.next=62,this.request("remote_login","DELETE");case 62:return(d=Oe.getState().config).save(),Oe.dispatch(se(d)),Oe.dispatch(le("\u8fdc\u7a0b\u767b\u5f55\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u7f8e\u56e2\u8d26\u53f7")),e.abrupt("return",i);case 69:200===i.code?"session"===t&&"POST"===n?(j=i.data,h=j.access_token,b=j.refresh_token,this.set_token(h,b),this.update_config()):"session"===t&&"DELETE"===n&&(this.set_token("",""),this.update_config()):Oe.dispatch(le(i));case 70:return e.abrupt("return",i);case 71:case"end":return e.stop()}}),e,this,[[4,10],[17,23],[37,52]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()),je="group_bying_config",he=function(){function e(){Object(X.a)(this,e),this.load=this.load.bind(this),this.save=this.save.bind(this),this.theme_avaliable={"\u9ed8\u8ba4\u4e3b\u9898":Object(Q.a)({palette:{primary:{main:V.a[500]},secondary:{main:Z.a[500]}}}),"\u9ed1\u6697\u6a21\u5f0f":Object(Q.a)({palette:{type:"dark",primary:{main:$.a[500]},secondary:{main:ee.a[500]}}})},this.data_default={debug:!1,version_frontend:.1,theme_name:"\u9ed8\u8ba4\u4e3b\u9898",theme_avaliable:["\u9ed8\u8ba4\u4e3b\u9898","\u9ed1\u6697\u6a21\u5f0f"],settings_async:!0,api_token:{},enable_email:!0},this.data=this.data_default,this.theme=this.theme_avaliable["\u9ed8\u8ba4\u4e3b\u9898"],this.load()}return Object(Y.a)(e,[{key:"load",value:function(){console.log("Config: loading config..."),this.data.debug&&(console.log("Config: load default config."),this.save());try{if(this.data=JSON.parse(localStorage.getItem(je)),!this.data)throw new Error("Null data");if(console.log("Got data:",this.data),!this.data.version_frontend||this.data.version_frontend<this.data_default.version_frontend){for(var e in console.log("Config: update ".concat(this.data.version_frontend," -> ").concat(this.data_default.version_frontend)),this.data.version_frontend=this.data_default.version_frontend,this.data_default)this.data[e]||(console.log("    Config: add value ".concat(e)),this.data[e]=this.data_default[e]);this.save()}}catch(t){console.warn("Can not find ".concat(je," in localStorage, use default config.")),this.data=this.data_default,this.save()}this.theme=this.theme_avaliable[this.data.theme_name],this.theme||(this.theme=this.theme_avaliable.default),de.set_token(this.data.api_token.access_token,this.data.api_token.refresh_token)}},{key:"save",value:function(){console.log("Config: saving config..."),this.data.api_token=de.get_token();var e=JSON.stringify(this.data);return localStorage.setItem(je,e),e}}],[{key:"clear",value:function(){console.log("Config: clearing all data..."),localStorage.setItem(je,void 0)}}]),e}(),be={config:new he,account:[],user:null,daemon:null,errorInfo:null,message:null,types:{}};var fe=Object(K.b)({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.config,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONFIG":return t.data;default:return e}},errorInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.errorInfo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR_INFO":return t.data;default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.message,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return t.data;default:return e}},daemon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.daemon,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DAEMON":return t.data;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.user,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.data;default:return e}},account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.account,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCOUNTS":return t.data;default:return e}},types:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be.types,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TYPES":return t.data;default:return e}}}),Oe=Object(K.c)(fe,Object(K.a)(H.a)),xe=n(160),pe=n(204),ge=n(205),ve=n(2),me=!1;var ye=function(e){var t=e.icon,n=e.primary,a=e.to,c=e.onClick,r=i.a.useMemo((function(){return i.a.forwardRef((function(e,t){return Object(ve.jsx)(P.b,Object(d.a)({to:a,ref:t},e))}))}),[a]);return me||(me=!0,document.title="".concat(n," - \u56e2\u8d2d\u6740\u624b")),Object(ve.jsx)("li",{children:Object(ve.jsxs)(xe.a,{button:!0,component:r,onClick:function(){document.title="".concat(n," - \u56e2\u8d2d\u6740\u624b"),c&&c()},children:[t?Object(ve.jsx)(pe.a,{children:t}):null,Object(ve.jsx)(ge.a,{primary:n})]})})},ke=n(60),Se=n(55),we=n(54),_e=n(212),Ce=n(223),Ee=n(224),Te=n(225),qe=n(226),Ae=n(234),De=n(213),Ne=n(215),We=n(216),Re=n(217),Ie=n(206),Fe=n(218),Le=n(219),Pe=n(220),Ge=n(221),Je=n(85),ze=n.n(Je),Be=n(75),Ue=n(119),Me=n(237);n(148);function Ke(e){var t=e.children,n=e.style;return Object(ve.jsx)(Ae.a,{style:n||{width:"100%",height:"100%",display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(ve.jsx)(Ae.a,{style:{width:"100%",textAlign:"center",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:t})})}var He=function(e){Object(Se.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(X.a)(this,n),(a=t.call(this,e)).onFinish=e.onFinish,a.forceLogin=e.forceLogin,a.stateDefault={loginDone:!1,loginError:null,username:"",password:""},a.refUsername=i.a.createRef(),a.refPassword=i.a.createRef(),console.log("onFinish",a.onFinish),a.state=a.stateDefault,a.handleAction=a.handleAction.bind(Object(Be.a)(a)),a}return Object(Y.a)(n,[{key:"componentWillUnmount",value:function(){}},{key:"handleAction",value:function(){var e=Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.request("remote_login","POST",{username:this.state.username,password:this.state.password});case 2:if(200===(t=e.sent).code){e.next=6;break}return this.setState({loginDone:!0,loginError:t.message}),e.abrupt("return");case 6:return console.log("done remote_login",t),this.setState({loginDone:!0}),e.next=10,de.request("account","POST",{username:this.state.username,password:this.state.password});case 10:if(200===(n=e.sent).code){e.next=14;break}return this.setState({loginDone:!0,loginError:t.message}),e.abrupt("return");case 14:console.log("done add account",n);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=null;return t=this.state.loginDone?this.state.loginError?Object(ve.jsx)(Ue.a,{style:{width:200,height:200},children:Object(ve.jsxs)(Ke,{children:[Object(ve.jsx)(y.a,{variant:"body1",children:this.state.loginError}),Object(ve.jsx)(Ie.a,{variant:"outlined",color:"secondary",onClick:function(){e.setState(e.stateDefault)},children:"\u91cd\u8bd5"})]})}):Object(ve.jsx)(Ue.a,{style:{width:200,height:200},children:Object(ve.jsxs)(Ke,{children:[Object(ve.jsx)(y.a,{variant:"body1",children:"\u767b\u5f55\u5b8c\u6210"}),Object(ve.jsx)(Ie.a,{variant:"contained",color:"primary",onClick:function(){e.setState(e.stateDefault)},children:"\u7ee7\u7eed\u6dfb\u52a0"}),Object(ve.jsx)(Ie.a,{variant:"outlined",color:"secondary",onClick:function(){e.onFinish&&e.onFinish()},children:"\u9000\u51fa"})]})}):Object(ve.jsxs)("div",{children:[Object(ve.jsx)(Me.a,{fullWidth:!0,ref:this.refUsername,label:"\u7528\u6237\u540d",value:this.state.username,onChange:function(t){e.setState({username:t.target.value})},onKeyDown:function(t){"Enter"===t.code&&e.refPassword.current.querySelector("input").focus()}}),Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsx)(Me.a,{fullWidth:!0,ref:this.refPassword,label:"\u5bc6\u7801",value:this.state.password,type:"password",onChange:function(t){e.setState({password:t.target.value})},onKeyDown:function(t){"Enter"===t.code&&e.handleAction()}})," ",Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsx)(Ie.a,{fullWidth:!0,onClick:function(){e.handleAction()},variant:"contained",color:"primary",children:"\u9a8c\u8bc1"})]}),Object(ve.jsx)(_e.a,{maxWidth:"xs",children:Object(ve.jsxs)(Ke,{children:[Object(ve.jsx)(y.a,{variant:"h5",children:"\u6dfb\u52a0\u88ab\u7ba1\u7406\u8d26\u53f7"}),Object(ve.jsx)("br",{}),t,Object(ve.jsx)("br",{}),Object(ve.jsx)(y.a,{variant:"body2",color:"textSecondary",children:"\u8f93\u5165\u9700\u8981\u7ba1\u7406\u7684\u8d26\u53f7\u548c\u5bc6\u7801"}),Object(ve.jsx)(y.a,{variant:"body2",color:"textSecondary",children:"\u672c\u7a0b\u5e8f\u5c06\u4f1a\u5e2e\u52a9\u4f60\u62a2\u5230\u91cd\u8981\u4efb\u52a1"}),Object(ve.jsx)("br",{})]})})}}]),n}(i.a.Component);function Xe(e){var t=e.user,n=e.onRefresh,a=e.onClick;return Object(ve.jsxs)(xe.a,{button:!0,onClick:Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&a(t);case 1:case"end":return e.stop()}}),e)}))),children:[Object(ve.jsxs)(ge.a,{children:[Object(ve.jsx)(Ae.a,{children:t.enabled?Object(ve.jsx)(ve.Fragment,{children:Object(ve.jsx)(y.a,{variant:"h5",color:"primary",children:"".concat(t.username)})}):Object(ve.jsx)("s",{children:Object(ve.jsx)(y.a,{variant:"h5",color:"textSecondary",children:"".concat(t.username)})})}),Object(ve.jsx)(Ae.a,{children:Object(ve.jsx)(y.a,{variant:"body2",children:"".concat(t.enabled?"\u7ba1\u7406\u5df2\u5f00\u542f":"\u7ba1\u7406\u5df2\u5173\u95ed",";\u66f4\u65b0\u4e8e: ").concat(te(t.created_at))})})]}),Object(ve.jsx)(De.a,{children:Object(ve.jsx)(S.a,{onClick:Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.request("account?username=".concat(t.username),"DELETE");case 2:200==e.sent.code&&n&&n();case 4:case"end":return e.stop()}}),e)}))),children:Object(ve.jsx)(ze.a,{})})})]})}function Ye(e){var t=i.a.useState({requestingAccounts:!1,dialogAddAccountOpen:!1,dialogSetAccountOpen:!1,addMode:!0,account:null}),n=Object(u.a)(t,2),a=n[0],s=n[1],o=Oe.getState().account,l=i.a.useReducer((function(e){return e+1}),0),d=Object(u.a)(l,2),j=(d[0],d[1]),h=function(e){return s(re(a,e))};a.requestingAccounts||(h({requestingAccounts:!0}),de.request("account","GET").then((function(e){var t;200===e.code?(Oe.dispatch((t=e.data.accounts,function(e){e({type:"SET_ACCOUNTS",data:t})})),j()):Oe.dispatch(le(e))})));var b=a.requestingAccounts?o?Object(ve.jsx)(v.a,{children:o.map((function(e,t){return Object(ve.jsx)(Xe,{user:e,onRefresh:function(){h({requestingAccounts:!1})},onClick:function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({account:t,dialogSetAccountOpen:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},t)}))}):Object(ve.jsx)("div",{children:Object(ve.jsx)(Ne.a,{})}):null;return Object(ve.jsxs)(_e.a,{children:[Object(ve.jsxs)(We.a,{container:!0,spacing:3,children:[Object(ve.jsxs)(We.a,{item:!0,lg:8,sm:12,children:[Object(ve.jsx)(y.a,{variant:"h4",children:"\u88ab\u7ba1\u7406\u8d26\u53f7\u5217\u8868"}),b]}),Object(ve.jsx)(We.a,{item:!0,lg:4,sm:12,children:Object(ve.jsx)(_e.a,{maxWidth:"xs",children:Object(ve.jsxs)(v.a,{children:[Object(ve.jsx)(Re.a,{children:"\u65b0\u88ab\u7ba1\u7406\u8d26\u53f7"}),Object(ve.jsx)(xe.a,{children:Object(ve.jsx)(Ie.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){h({dialogAddAccountOpen:!0,addMode:!0})},children:"\u6dfb\u52a0\u65b0\u88ab\u7ba1\u7406\u8d26\u53f7"})}),Object(ve.jsx)(xe.a,{children:Object(ve.jsx)(Ie.a,{fullWidth:!0,disabled:!0,variant:"contained",children:"\u8bbe\u7f6e\u9ed8\u8ba4\u88ab\u7ba1\u7406\u8d26\u53f7"})}),Object(ve.jsx)(Re.a,{children:"\u5168\u90e8\u88ab\u7ba1\u7406\u8d26\u53f7\u7ba1\u7406"}),Object(ve.jsx)(xe.a,{children:Object(ve.jsx)(Ie.a,{fullWidth:!0,disabled:o&&0===o.length||null===o,variant:"outlined",onClick:Object(r.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(ke.a)(o),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=10;break}return a=n.value,e.next=7,de.request("account?username=".concat(a.username),"DELETE");case 7:e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:h({requestingAccounts:!1});case 19:case"end":return e.stop()}}),e,null,[[1,12,15,18]])}))),children:"\u5220\u9664\u5168\u90e8\u88ab\u7ba1\u7406\u8d26\u53f7"})}),Object(ve.jsx)(xe.a,{children:Object(ve.jsx)(Ie.a,{fullWidth:!0,disabled:o&&0===o.length||null===o,variant:"outlined",onClick:Object(r.a)(c.a.mark((function e(){var t,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(ke.a)(o),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=10;break}return a=n.value,e.next=7,de.request("account?username=".concat(a.username,"&enabled=",0),"PATCH");case 7:e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:h({requestingAccounts:!1});case 19:case"end":return e.stop()}}),e,null,[[1,12,15,18]])}))),children:"\u5173\u95ed\u5168\u90e8\u88ab\u7ba1\u7406\u8d26\u53f7\u7684\u7ba1\u7406"})})]})})})]}),Object(ve.jsxs)(Fe.a,{open:a.dialogAddAccountOpen,onClose:function(){h({dialogAddAccountOpen:!1})},children:[Object(ve.jsx)(Le.a,{children:"\u6dfb\u52a0\u65b0\u88ab\u7ba1\u7406\u8d26\u53f7"}),Object(ve.jsx)(Pe.a,{children:Object(ve.jsx)(He,{onFinish:function(){h({dialogAddAccountOpen:!1,requestingAccounts:!1}),j()}})})]}),Object(ve.jsxs)(Fe.a,{open:a.dialogSetAccountOpen,onClose:function(){h({dialogSetAccountOpen:!1,account:null})},children:[Object(ve.jsxs)(Le.a,{children:["\u662f\u5426",a.account&&a.account.enabled?"\u5173\u95ed\u7ba1\u7406":"\u6253\u5f00\u7ba1\u7406","\uff1f"]}),Object(ve.jsxs)(Ge.a,{children:[Object(ve.jsx)(Ie.a,{color:"primary",onClick:function(){h({dialogSetAccountOpen:!1,account:null})},children:"\u53d6\u6d88"}),Object(ve.jsx)(Ie.a,{color:"primary",autoFocus:!0,onClick:Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.request("account?username=".concat(a.account.username,"&enabled=").concat(a.account.enabled?0:1),"PATCH");case 2:200==e.sent.code&&(h({dialogSetAccountOpen:!1,account:null,requestingAccounts:!1}),j());case 4:case"end":return e.stop()}}),e)}))),children:"\u786e\u5b9a"})]})]})]})}var Qe=n(235),Ve=n(222);function Ze(e){var t={"\u8c03\u8bd5":10,"\u4fe1\u606f":20,"\u8b66\u544a":30,"\u9519\u8bef":40,"\u81f4\u547d\u9519\u8bef":50},n={10:"textSecondary",20:"textPrimary",30:"primary",40:"secondary",50:"secondary"},a={level:t.\u4fe1\u606f,limit:30,offset:0,requested:!1,logs:[]},c=i.a.useState(a),r=Object(u.a)(c,2),s=r[0],o=r[1],l=function(e){return o(re(s,e))},d=null;return s.requested?d=0==s.logs.length?Object(ve.jsx)(y.a,{color:"textSecondary",children:"\u5217\u8868\u4e3a\u7a7a\u3002"}):Object(ve.jsx)(v.a,{children:s.logs.map((function(e,t){return Object(ve.jsxs)(xe.a,{children:[Object(ve.jsx)(ge.a,{color:n[e.level],primary:"[".concat(t,"] ")+e.text}),Object(ve.jsx)(De.a,{children:Object(ve.jsx)(y.a,{variant:"body2",color:"textSecondary",children:te(e.created_at)})})]})}))}):(de.request("log?limit=".concat(s.limit,"&offset=").concat(s.offset,"&level=").concat(s.level),"GET").then((function(e){l({requested:!0,logs:e.data.logs})})),d=Object(ve.jsx)(Ne.a,{})),Object(ve.jsxs)(_e.a,{children:[Object(ve.jsxs)("span",{children:["\u8bbe\u7f6e\u65e5\u5fd7\u67e5\u770b\u7b49\u7ea7",Object(ve.jsx)(Qe.a,{value:s.level,onChange:function(e){l({level:e.target.value,requested:!1})},children:Object.keys(t).map((function(e,n){return Object(ve.jsx)(Ve.a,{value:t[e],children:e},n)}))})]}),Object(ve.jsx)("span",{children:Object(ve.jsx)(Ie.a,{size:"small",onClick:function(){l({requested:!1})},color:"primary",children:"\u5237\u65b0"})}),Object(ve.jsx)(_e.a,{style:{maxHeight:360,overflow:"auto"},children:d})]})}var $e=function(e){Object(Se.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(X.a)(this,n),(a=t.call(this,e)).state=Oe.getState({requested:!1,fetched_task:null,account:[]}),a.unsubscribe=Oe.subscribe((function(){Oe.getState().account&&Oe.getState().account.length>0&&a.setState({account:Oe.getState().account})})),a}return Object(Y.a)(n,[{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e,t=this,n=0,a=Object(ke.a)(this.state.account);try{for(a.s();!(e=a.n()).done;){e.value.enabled&&n++}}catch(c){a.e(c)}finally{a.f()}return this.state.requested||(this.setState({requested:!0}),de.request("state","GET").then((function(e){t.setState({fetched_task:e.data.state.fetched_task})}))),Object(ve.jsx)(Ce.a,{children:Object(ve.jsxs)(Ee.a,{children:[Object(ve.jsxs)(Te.a,{children:[Object(ve.jsx)(qe.a,{align:"center",children:"\u88ab\u7ba1\u7406\u8d26\u53f7\u6570\u91cf"}),Object(ve.jsx)(qe.a,{align:"center",children:"\u5df2\u5f00\u542f\u7ba1\u7406\u6570\u91cf"}),Object(ve.jsx)(qe.a,{align:"center",children:"\u5df2\u7ecf\u62a2\u5230\u7684\u4efb\u52a1\u6570\u91cf"})]}),Object(ve.jsxs)(Te.a,{children:[Object(ve.jsxs)(qe.a,{align:"center",children:[this.state.account.length,"\u4e2a"]}),Object(ve.jsxs)(qe.a,{align:"center",children:[n,"\u4e2a"]}),Object(ve.jsxs)(qe.a,{align:"center",children:[this.state.fetched_task,"\u4e2a"]})]})]})})}}]),n}(i.a.Component);var et=function(e){return Object(ve.jsxs)(_e.a,{children:[Object(ve.jsx)(y.a,{variant:"h5",children:"\u6267\u884c\u72b6\u6001"}),Object(ve.jsx)(k.a,{}),Object(ve.jsx)($e,{}),Object(ve.jsx)(Ze,{}),Object(ve.jsx)("br",{}),Object(ve.jsx)(y.a,{variant:"h5",children:"\u8d26\u53f7\u7ba1\u7406"}),Object(ve.jsx)(k.a,{}),Object(ve.jsx)(Ye,{})]})},tt=n(236),nt=n(209);function at(e){var t=e.data,n=e.open,a=e.onClose,c=e.title,r=e.keyNames,s=i.a.useState(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],j=i.a.useState(null),h=Object(u.a)(j,2),b=h[0],f=h[1],O=i.a.useState(null),x=Object(u.a)(O,2),p=x[0],g=x[1];return Object(ve.jsxs)(Fe.a,{fullWidth:!0,open:n,onClose:a,children:[Object(ve.jsx)(Le.a,{children:c}),Object(ve.jsxs)(Pe.a,{children:[Object(ve.jsx)(v.a,{style:{width:"100%"},children:Object.keys(t).map((function(e,n){var a=r&&r[e]||e;if(t[e]){if("object"===typeof t[e])return Object(ve.jsx)(xe.a,{button:!0,onClick:function(){f(t[e]),g(a),d(!0)},children:a},e);var c="".concat(t[e]);return Object(ve.jsxs)(xe.a,{children:[Object(ve.jsx)(ge.a,{children:a}),Object(ve.jsx)(De.a,{children:Object(ve.jsx)(y.a,{variant:"body1",children:c.slice(0,20)+(c.length>20?"...":"")})})]},e)}}))}),b&&p?Object(ve.jsx)(at,{data:b,open:l,onClose:function(){d(!1)},title:p}):void 0]})]})}var ct=function(e){var t=i.a.useState(Oe.getState().config.data.theme_name),n=Object(u.a)(t,2),a=n[0],s=n[1],o=(i.a.useRef(),i.a.useState(!1)),l=Object(u.a)(o,2),d=l[0],j=l[1],h=i.a.useState(!1),b=Object(u.a)(h,2),f=(b[0],b[1],i.a.useState(!1)),O=Object(u.a)(f,2),x=(O[0],O[1],i.a.useState(!1)),p=Object(u.a)(x,2),g=p[0],m=p[1],k=i.a.useState(!1),S=Object(u.a)(k,2),w=(S[0],S[1],i.a.useState(!1)),_=Object(u.a)(w,2),C=(_[0],_[1],i.a.useState(!1)),E=Object(u.a)(C,2),T=E[0],q=E[1],A=i.a.useState(""),D=Object(u.a)(A,2),N=D[0],W=D[1],R=i.a.useState(!1),I=Object(u.a)(R,2),F=I[0],L=I[1],P=i.a.useState(Oe.getState().user.profile.contact.email),G=Object(u.a)(P,2),J=G[0],z=G[1],B=i.a.useReducer((function(e){return e+1}),0),U=Object(u.a)(B,2),M=(U[0],U[1]),K=Oe.getState().user;return Object(ve.jsxs)(_e.a,{maxWidth:"md",children:[Object(ve.jsxs)(v.a,{children:[Object(ve.jsx)(Re.a,{children:"\u7528\u6237\u8d26\u53f7"}),Object(ve.jsxs)(xe.a,{children:[Object(ve.jsx)(ge.a,{primary:"\u7528\u6237\u540d"}),Object(ve.jsx)(De.a,{children:K.username})]}),Object(ve.jsx)(xe.a,{button:!0,onClick:function(){m(!0)},children:Object(ve.jsx)(ge.a,{primary:"\u8be6\u7ec6\u4fe1\u606f"})}),Object(ve.jsxs)(xe.a,{button:!0,onClick:function(){L(!0)},children:[Object(ve.jsx)(ge.a,{primary:"\u4fee\u6539\u90ae\u7bb1"}),Object(ve.jsx)(De.a,{children:Object(ve.jsx)(y.a,{variant:"body2",color:"textSecondary",children:J})})]}),Object(ve.jsxs)(xe.a,{children:[Object(ve.jsx)(ge.a,{primary:"\u901a\u8fc7\u90ae\u7bb1\u63a5\u6536\u8fd0\u884c\u62a5\u544a"}),Object(ve.jsx)(De.a,{children:Object(ve.jsx)(tt.a,{checked:Oe.getState().config.data.enable_email,onChange:function(e){var t=Oe.getState().config;t.data.enable_email=!t.data.enable_email,t.save(),Oe.dispatch(se(t)),M()}})})]}),Object(ve.jsx)(xe.a,{button:!0,onClick:function(){he.clear(),setTimeout((function(){window.location.reload()}),500)},children:Object(ve.jsx)(ge.a,{primary:"\u9000\u51fa\u5f53\u524d\u8d26\u53f7"})}),Object(ve.jsx)(Re.a,{children:"\u5916\u89c2"}),Object(ve.jsxs)(xe.a,{children:[Object(ve.jsx)(ge.a,{primary:"\u4e3b\u9898\u8bbe\u7f6e"}),Object(ve.jsx)(De.a,{children:Object(ve.jsx)(nt.a,{children:Object(ve.jsx)(Qe.a,{value:a,onChange:function(e){s(e.target.value);var t=Oe.getState().config;t.data.theme_name=e.target.value,t.theme=t.theme_avaliable[t.data.theme_name],t.save(),Oe.dispatch(se(t)),setTimeout((function(){window.location.reload()}),200)},children:Oe.getState().config.data.theme_avaliable.map((function(e,t){return Object(ve.jsx)(Ve.a,{value:e,children:e},e)}))})})})]}),1===Oe.getState().user.uid?Object(ve.jsx)(xe.a,{button:!0,onClick:function(){q(!0)},children:Object(ve.jsx)(ge.a,{primary:"\u521b\u5efa\u9a8c\u8bc1\u7801"})}):null,Object(ve.jsx)(xe.a,{button:!0,onClick:function(){return j(!0)},children:Object(ve.jsx)(ge.a,{primary:"\u56de\u5230\u9ed8\u8ba4\u8bbe\u7f6e"})})]}),Object(ve.jsx)(at,{data:Oe.getState().user,open:g,keyNames:{username:"\u7528\u6237\u540d",nick:"\u6635\u79f0",phone:"\u7528\u6237\u624b\u673a\u53f7",profile:"\u8be6\u7ec6\u4fe1\u606f",state:"\u7528\u6237\u72b6\u6001",created_at:"\u521b\u5efa\u4e8e",updated_at:"\u66f4\u65b0\u4e8e"},title:"\u7528\u6237\u4fe1\u606f",onClose:function(){m(!1)}}),Object(ve.jsxs)(Fe.a,{open:d,onClose:function(){return j(!1)},children:[Object(ve.jsx)(Le.a,{children:"\u56de\u5230\u9ed8\u8ba4\u8bbe\u7f6e"}),Object(ve.jsx)(Pe.a,{children:Object(ve.jsx)(y.a,{variant:"body1",children:"\u6b64\u64cd\u4f5c\u5c06\u4f1a\u6e05\u9664\u6240\u6709\u8bbe\u7f6e\u6570\u636e\uff0c\u786e\u8ba4\u64cd\u4f5c\uff1f"})}),Object(ve.jsxs)(Ge.a,{children:[Object(ve.jsx)(Ie.a,{onClick:function(){return j(!1)},children:"\u53d6\u6d88"}),Object(ve.jsx)(Ie.a,{onClick:function(){!function(){var e=Oe.getState().config;e.data=e.data_default,e.save(),e.load(),Oe.dispatch(se(e))}(),window.location.reload()},children:"\u786e\u5b9a"})]})]}),Object(ve.jsxs)(Fe.a,{open:T,onClose:function(){q(!1)},children:[Object(ve.jsx)(Pe.a,{children:Object(ve.jsx)(Me.a,{value:N,onChange:function(e){W(e.target.value)}})}),Object(ve.jsxs)(Ge.a,{children:[Object(ve.jsx)(Ie.a,{onClick:function(){q(!1)},children:"\u5173\u95ed"}),Object(ve.jsx)(Ie.a,{onClick:Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.request("vip_code?username=".concat(N),"GET");case 2:200==(t=e.sent).code&&Oe.dispatch(ue(t.data.vip_code));case 4:case"end":return e.stop()}}),e)}))),children:"\u786e\u5b9a"})]})]}),Object(ve.jsxs)(Fe.a,{open:F,onClose:function(){L(!1)},children:[Object(ve.jsx)(Le.a,{children:"\u66f4\u65b0\u90ae\u7bb1"}),Object(ve.jsx)(Pe.a,{children:Object(ve.jsx)(Me.a,{value:J,onChange:function(e){z(e.target.value)}})}),Object(ve.jsxs)(Ge.a,{children:[Object(ve.jsx)(Ie.a,{color:"primary",onClick:function(){L(!1)},children:"\u53d6\u6d88"}),Object(ve.jsx)(Ie.a,{color:"primary",onClick:Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.request("user_info","POST",{contact:{email:J}});case 2:200==e.sent.code&&window.location.reload();case 4:case"end":return e.stop()}}),e)}))),children:"\u786e\u5b9a"})]})]})]})},rt=(n(156),n(238)),st=n(120);function it(e){var t=i.a.useState({username:"",password:"",vip_code:"",email:"",actionType:"login"}),n=Object(u.a)(t,2),a=n[0],s=n[1],o=i.a.useRef(),l=i.a.useRef(),d=i.a.useRef(),j=i.a.useRef(),h=function(e){return s(re(a,e))},b="login"===a.actionType,f=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=16;break}return e.next=3,de.request("session","POST",{username:a.username,password:a.password});case 3:if(t=e.sent,console.log(t),200===t.code){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,de.request("user","GET");case 9:if(200===(n=e.sent).code){e.next=12;break}return e.abrupt("return");case 12:console.log("user",n.data.user),Oe.dispatch(ie(n.data.user)),e.next=21;break;case 16:return e.next=18,de.request("user","POST",{username:a.username,password:a.password,vip_code:a.vip_code,email:a.email});case 18:r=e.sent,console.log(r),200===r.code&&(Oe.dispatch(ue("\u6ce8\u518c\u6210\u529f")),h({actionType:"login"}));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ve.jsxs)(Ae.a,{children:[Object(ve.jsx)(y.a,{variant:"h4",children:b?"\u767b\u5f55":"\u6ce8\u518c"}),Object(ve.jsx)("br",{}),Object(ve.jsx)(k.a,{}),Object(ve.jsx)("br",{}),Object(ve.jsx)(Me.a,{fullWidth:!0,ref:o,label:"\u7528\u6237\u540d",variant:"outlined",value:a.username,onChange:function(e){h({username:e.target.value})},onKeyDown:function(e){"Enter"===e.code&&l.current.querySelector("input").focus()}}),Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsx)(Me.a,{fullWidth:!0,ref:l,label:"\u5bc6\u7801",variant:"outlined",value:a.password,type:"password",onChange:function(e){h({password:e.target.value})},onKeyDown:function(e){"Enter"===e.code&&(b?f():d.current.querySelector("input").focus())}}),Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),b?null:Object(ve.jsxs)(ve.Fragment,{children:[Object(ve.jsx)(Me.a,{fullWidth:!0,ref:d,label:"\u90ae\u7bb1, \u7528\u4e8e\u63a5\u6536\u7a0b\u5e8f\u6d88\u606f",variant:"outlined",value:a.email,onChange:function(e){h({email:e.target.value})},onKeyDown:function(e){"Enter"===e.code&&j.current.querySelector("input").focus()}}),Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsx)(Me.a,{fullWidth:!0,ref:j,label:"\u9a8c\u8bc1\u7801",variant:"outlined",value:a.vip_code,onChange:function(e){h({vip_code:e.target.value})},onKeyDown:function(e){"Enter"===e.code&&f()}})]}),Object(ve.jsx)(st.a,{in:b,style:{display:b?"block":"none"},timeout:{exit:0,enter:200},children:Object(ve.jsxs)(Ae.a,{children:[Object(ve.jsxs)(Ae.a,{children:[Object(ve.jsx)("br",{}),Object(ve.jsx)(Ie.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:f,children:"\u767b\u5f55"})]}),Object(ve.jsxs)(Ae.a,{children:[Object(ve.jsx)("br",{}),Object(ve.jsx)(Ie.a,{fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return h({actionType:"sign_in"})},children:"\u6ce8\u518c"})]})]})}),Object(ve.jsx)(st.a,{in:!b,style:{display:b?"none":"block"},timeout:{exit:0,enter:200},children:Object(ve.jsxs)(Ae.a,{children:[Object(ve.jsxs)(Ae.a,{children:[Object(ve.jsx)("br",{}),Object(ve.jsx)(Ie.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:f,children:"\u6ce8\u518c"})]}),Object(ve.jsxs)(Ae.a,{children:[Object(ve.jsx)("br",{}),Object(ve.jsx)(Ie.a,{fullWidth:!0,variant:"contained",onClick:function(){return h({actionType:"login"})},children:"\u8fd4\u56de\u767b\u5f55"})]})]})})]})}function ot(e){return Object(ve.jsx)(_e.a,{maxWidth:"sm",children:Object(ve.jsx)(it,{})})}var lt=function(e){Object(Se.a)(n,e);var t=Object(we.a)(n);function n(e){var a;return Object(X.a)(this,n),(a=t.call(this,e)).state={error:null,requesting:!1,requested:!1},a}return Object(Y.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this;this.setState({error:{error:e,info:t},requesting:!0}),console.error("catched error",e),console.error("catched info",t),de.request("error_report","POST",{error:{error:e,info:t}}).then((function(e){n.setState({requested:!0})}))}},{key:"render",value:function(){if(this.state.error){var e=this.state.requesting&&!this.state.requested?Object(ve.jsx)("div",{style:{color:"orange"},children:"\u6b63\u5728\u6536\u96c6\u6570\u636e\u5e76\u4e14\u4e0a\u62a5\u5f00\u53d1\u8005..."}):Object(ve.jsxs)("div",{style:{color:"green"},children:["\u9519\u8bef\u6570\u636e\u4e0a\u62a5\u5b8c\u6210\uff01",Object(ve.jsx)("div",{children:"#/"===window.location.hash?null:Object(ve.jsxs)("div",{children:[Object(ve.jsx)("br",{}),"\u4f60\u53ef\u4ee5\u9009\u62e9\uff1a",Object(ve.jsx)("a",{href:"/",children:"\u56de\u5230\u4e3b\u9875"})]})})]});return Object(ve.jsxs)("div",{children:[Object(ve.jsx)("b",{children:Object(ve.jsx)("h3",{children:"\u5f88\u62b1\u6b49"})}),Object(ve.jsx)("p",{children:"\u9875\u9762\u5d29\u6e83\u4e86\uff01"}),Object(ve.jsx)("hr",{}),e,Object(ve.jsx)("p",{children:"\u5bf9\u60a8\u9020\u6210\u7684\u56f0\u6270\u6211\u4eec\u8868\u793a\u62b1\u6b49\uff0c\u5982\u679c\u6709\u5176\u4ed6\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff0c\u8bf7\u8054\u7cfb\uff1a"}),Object(ve.jsxs)("p",{children:["\u5f00\u53d1\u8005\u90ae\u7bb1\uff1a",Object(ve.jsx)("a",{href:"mailto:chiro2001@163.com",children:"chiro2001@163.com"})," / \u5f00\u53d1\u8005\u5fae\u4fe1\uff1achiro2001"]}),Object(ve.jsx)("hr",{}),Object(ve.jsx)("p",{children:"\u8be6\u7ec6\u9519\u8bef\uff1a"}),Object(ve.jsx)("code",{children:JSON.stringify(this.state.error)})]})}return this.props.children}}]),n}(i.a.Component),ut=240;M.a.locale("zh-cn");var dt=Object(b.a)((function(e){return{root:{display:"flex",width:"100%"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},title:{flexGrow:1},appBarShift:{marginLeft:ut,width:"calc(100% - ".concat(ut,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:ut,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:ut,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(j.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)}),toolbar:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3),width:"100%",overflowX:"auto"}}})),jt={},ht={config:null,user:null,daemon:null};Oe.subscribe(Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Oe.getState()).config.data){e.next=10;break}if(JSON.stringify(t.config.data)===ht.config){e.next=9;break}if(t.config.save(),!Oe.getState().user||!Oe.getState().config.data.settings_async){e.next=7;break}return e.next=7,de.request("sync","POST",{config:t.config.data});case 7:e.next=9;break;case 9:ht.config=JSON.stringify(t.config.data);case 10:for(n in jt)jt[n](t);case 11:case"end":return e.stop()}}),e)}))));function bt(){var e,t,n=dt(),a=Object(f.a)(),s=i.a.useState(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],b=i.a.useState(!1),w=Object(u.a)(b,2),C=w[0],T=w[1],A=i.a.useState(null),N=Object(u.a)(A,2),R=N[0],F=N[1],J=i.a.useState(!1),U=Object(u.a)(J,2),M=(U[0],U[1],i.a.useState("\u4f17\u661f\u8ba1\u5212\u4efb\u52a1\u7ba1\u7406\u7a0b\u5e8f")),K=Object(u.a)(M,2),H=K[0],X=(K[1],i.a.useReducer((function(e){return e+1}),0)),Y=Object(u.a)(X,2),Q=(Y[0],Y[1]),V=i.a.useState(!1),Z=Object(u.a)(V,2),$=(Z[0],Z[1],i.a.useState(!1)),ee=Object(u.a)($,2);ee[0],ee[1];jt.Error=function(e){e.errorInfo&&(console.log("Error Hook: ",e.errorInfo),T(e.errorInfo),Oe.dispatch(le(null)))},jt.Message=function(e){e.message&&(console.log("message: ",e.message),F(e.message),Oe.dispatch(ue(null)))},jt.User=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.user&&(JSON.stringify(t.user)!=JSON.stringify(ht.user)&&(Q(),ht.user),ht.user=t.user);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.a.useEffect((function(){var e=function(){var e=window.innerWidth;!l&&e>=800&&d(!0),l&&e<=600&&d(!1)};return window.addEventListener("load",e),window.addEventListener("resize",e),function(){window.removeEventListener("load",e),window.removeEventListener("resize",e)}}));var te=Object(ve.jsx)(P.a,{children:Object(ve.jsxs)(z.a,{utils:B.a,locale:"zh-cn",children:[Object(ve.jsx)(m.a,{}),Object(ve.jsx)(p.a,{position:"fixed",className:Object(h.a)(n.appBar,Object(j.a)({},n.appBarShift,l)),children:Object(ve.jsxs)(g.a,{children:[Object(ve.jsx)(S.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(h.a)(n.menuButton,Object(j.a)({},n.hide,l)),children:Object(ve.jsx)(_.a,{})}),Object(ve.jsx)(y.a,{variant:"h6",noWrap:!0,className:n.title,children:H})]})}),Object(ve.jsxs)(x.a,{variant:"permanent",className:Object(h.a)(n.drawer,(e={},Object(j.a)(e,n.drawerOpen,l),Object(j.a)(e,n.drawerClose,!l),e)),classes:{paper:Object(h.a)((t={},Object(j.a)(t,n.drawerOpen,l),Object(j.a)(t,n.drawerClose,!l),t))},children:[Object(ve.jsx)("div",{className:n.toolbar,children:Object(ve.jsx)(S.a,{onClick:function(){d(!1)},children:"rtl"===a.direction?Object(ve.jsx)(q.a,{}):Object(ve.jsx)(E.a,{})})}),Object(ve.jsx)(k.a,{}),Object(ve.jsxs)(v.a,{onClick:function(){(window.innerWidth<600||"/"===window.location.pathname)&&d(!1)},children:[Object(ve.jsx)(ye,{to:"/",primary:"\u542f\u52a8\u9875",icon:Object(ve.jsx)(D.a,{})}),Object(ve.jsx)(ye,{to:"/manage",primary:"\u7ba1\u7406",icon:Object(ve.jsx)(L.a,{})}),Object(ve.jsx)(ye,{to:"/settings",primary:"\u8bbe\u7f6e",icon:Object(ve.jsx)(W.a,{})})]})]}),Object(ve.jsxs)("main",{className:n.content,children:[Object(ve.jsx)("div",{className:n.toolbar}),Object(ve.jsxs)(G.c,{children:[Object(ve.jsx)(G.a,{path:"/",exact:!0,children:Object(ve.jsx)(et,{})}),Object(ve.jsx)(G.a,{path:"/manage",exact:!0,children:Object(ve.jsx)(Ye,{})}),Object(ve.jsx)(G.a,{path:"/settings",exact:!0,children:Object(ve.jsx)(ct,{})})]})]})]})}),ne=Oe.getState().user,ce=!ne&&Oe.getState().config.data.api_token.access_token?Object(ve.jsx)(Ae.a,{children:"\u6b63\u5728\u767b\u5f55..."}):ne?te:Object(ve.jsx)(ot,{});return console.log("app.js user",ne,"content",ce),Object(ve.jsx)("div",{className:n.root,children:Object(ve.jsx)(lt,{children:Object(ve.jsxs)(O.a,{theme:Oe.getState().config.theme,children:[ce,Object(ve.jsxs)(Fe.a,{open:!!C,onClose:function(){T(null)},children:[Object(ve.jsx)(Le.a,{children:"\u9047\u5230\u9519\u8bef"}),Object(ve.jsxs)(Pe.a,{children:[Object(ve.jsx)(y.a,{variant:"body1",children:"\u9519\u8bef\u4fe1\u606f"}),Object(ve.jsx)(Ae.a,{component:"div",children:Object(ve.jsx)(Ae.a,{component:"div",children:function(){return ae(C)&&"string"!==typeof C?Object(ve.jsx)(v.a,{children:C.map((function(e,t){return Object(ve.jsx)(xe.a,{children:Object(ve.jsx)("code",{children:"{}"===JSON.stringify(e)?e.toString():JSON.stringify(e)})},e)}))}):Object(ve.jsx)("code",{children:"{}"===JSON.stringify(C)?C.toString():JSON.stringify(C)})}})})]}),Object(ve.jsxs)(Ge.a,{children:[Object(ve.jsx)(Ie.a,{color:"primary",onClick:function(){window.location.reload()},children:"\u5237\u65b0"}),Object(ve.jsx)(Ie.a,{color:"primary",onClick:function(){T(null)},children:"\u53d6\u6d88"})]})]}),Object(ve.jsx)(rt.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:null!==R,autoHideDuration:3e3,message:R,action:Object(ve.jsx)(i.a.Fragment,{children:Object(ve.jsx)(S.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){return F(null)},children:Object(ve.jsx)(I.a,{fontSize:"small"})})})})]})})})}var ft=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,242)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};function Ot(){return(Ot=Object(r.a)(c.a.mark((function e(){var t,n=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:1e3;case 1:return e.next=5,ne(t);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(){return(xt=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(Object(r.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Oe.getState().user,!(!t&&Oe.getState().config.data.api_token.access_token)){e.next=8;break}return de.load_from_config(),e.next=6,de.request("user","GET");case 6:200===(n=e.sent).code&&Oe.dispatch(ie(n.data.user));case 8:case"end":return e.stop()}}),e)}))),0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a.render(Object(ve.jsx)(J.a,{store:Oe,children:Object(ve.jsx)(bt,{})}),document.getElementById("root")),function(){return xt.apply(this,arguments)}().then((function(){!function(){Ot.apply(this,arguments)}()})),ft()}},[[157,1,2]]]);
//# sourceMappingURL=main.70da792d.chunk.js.map